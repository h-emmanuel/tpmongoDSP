<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="style.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
		<script defer src="node_modules/@fortawesome/fontawesome-free/js/brands.js"></script>
		<script defer src="node_modules/@fortawesome/fontawesome-free/js/solid.js"></script>
		<script defer src="node_modules/@fortawesome/fontawesome-free/js/fontawesome.js"></script>
		<title>myDashboardJs</title>
	</head>
	<body>
		<div class="container">
			<nav class="navbar navbar-expand-lg navbar-light bg-light">
				<a class="navbar-brand" href="#">TPMongoDSP</a>
				<a class="navbar-brand" href="register.html">Register</a>
				<a class="navbar-brand" href="login.html">Login</a>
			</nav>
		</div>
		<br>
		<div class="container" id="addTask">
			<form action="/api/task" method="post">
				<label for="taskTitle">Titre</label>
				<input type="text" name="taskTitle" placeholder="Entrer une nouvelle tache" class="form-control">
				<label for="taskTitle">Description</label>
				<input type="text" name="taskDescription" placeholder="Entrer une nouvelle tache" class="form-control">
				<input type="submit" value="Ajouter" class="form-control">
			</form>
		</div>
		<br>
		<div class="container" id="taskContainer"></div>
		<script src="app.js"></script>
		<script>
			var taskContainer = document.getElementById("taskContainer");
divHtml = "";
fetch('http://127.0.0.1:3000/api/task').then(response => {
return response.json();
}).then(tasks => {
tasks.forEach(element => {
divHtml = "<div class='container mb-3' id='div_" + element._id + "'><div class='col-md-12 col-12 col-sm-12'> <div class='card'> <div class='card-header' > <h4> <button class='btn btn-info' id='" + element._id + "' onclick ='deleteTask(event)' > <i id='" + element._id + "' class='fa fa-trash' aria-hidden='true'> </i></button> " + element.title + " </h4></div > <div class='card-body'>" + element.title + "</div></div> </div> </div>"
taskContainer.insertAdjacentHTML("beforeend", divHtml);
});
console.log(divHtml);
// taskContainer.innerHTML = divHtml;
})
		</script>
	</body>
</html>
